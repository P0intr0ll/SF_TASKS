package com.staf {	import flash.display.MovieClip;	import flash.events.MouseEvent;	import com.pointroll.api.form.EmailFormField	import com.pointroll.api.form.TextualFormField		import flash.events.Event;	public class SendToAFriend extends SendToAFriendUtilities{		private var emailData:String;				public function SendToAFriend(main:MovieClip, formBaseURL:String, fieldsInForm:int, dataCollectID:String) {						super(main, formBaseURL, fieldsInForm, dataCollectID);			activeTextFields = new Array(t0, t1);						next_mc.buttonMode = closeSTAF_mc.buttonMode = send_mc.buttonMode = true;			send_mc.visible = t2.visible = t3.visible = false;						next_mc.addEventListener(MouseEvent.CLICK, validateStageOne)															registerFields(new TextualFormField('F1',t0,'text'), new EmailFormField('F2',t1,'text'))		}				private function validateStageOne(e:Event):void{			if(prForm.validate()){				setActiveFields([t2,t3])				next_mc.visible = false				send_mc.visible = true;				registerFields(new TextualFormField('F3',t2,'text'), new EmailFormField('F4', t3,'text'))			} else {				showMessage(0)			}		}				protected function registerFields(...fieldArray:Array):void{	 		for(var i:uint = 0; i < fieldArray.length; i++){				prForm.registerField(fieldArray[i])			}		}						override protected function generateEmailData():String{			emailData = 'ID=4230305&Sendername='+t0.text+'&Senderemail='+t1.text+'&Recipientname='+t2.text+'&recipientemail='+t3.text+'&Plcmt='+placementID+'&Adid='+creativeID;			return emailData;		}				override protected function subShowMessage(i:int):void{			next_mc.mouseEnabled = send_mc.mouseEnabled = false;			message_txt.visible = true;			boxes_mc.visible = activeTextFields[0].visible = activeTextFields[1].visible = false;						//			super.showMessage(i);		}						override protected function subHideMessage(e:MouseEvent = null):void{			next_mc.mouseEnabled = send_mc.mouseEnabled = true;			message_txt.visible = false;			boxes_mc.visible = activeTextFields[0].visible = activeTextFields[1].visible = true;			trace('yo')			//			super.hideMessage(e);		}	}}